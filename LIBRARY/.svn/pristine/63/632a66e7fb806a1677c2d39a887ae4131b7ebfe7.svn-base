const ctx = document.getElementById('myChart').getContext('2d');
const bcl = document.querySelectorAll('.bookCategory');
const cnt = document.querySelectorAll('.cnt');

let labelList = [];
	for(let i = 0; i < cnt.length; i++){
		 labelList.push(bcl[i].value);
	}
let cntList =[];
	for(let i = 0; i < cnt.length; i++){
		cntList.push(cnt[i].value);
	}

console.log(labelList);

const myChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: labelList
        ,
        datasets: [{
            data: cntList 
            ,
            backgroundColor: [
                '#F5F3CE',
       	   		'#FFFEBD',
       	   		'#FFF891',
       	   		'#FFE671',
       	   		'#FFF338',
       	   		'#FFD163',
       	   		'#DAFF2C',
       	   		'#C1FF18',
       	   		'#B5E61D'
       	   		
       	   		
       	   		
       	   		
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});


//to read list

const toReadForm = document.getElementById('toread-form');
const toReadInput = toReadForm.querySelector('input');
const toReadList = document.getElementById('toread-list');
const memId = toReadForm.querySelector('input[type="hidden"]').value;

function doneToRead(event){
	$.ajax({
		url: '/member/updateToReadList', //ìš”ì²­ê²½ë¡œ
		type: 'post',
		data: {'memId':memId, 'toReadTitle':newToRead}, //í•„ìš”í•œ ë°ì´í„° 'ë°ì´í„°ì´ë¦„':ê°’
		success: function(result) {
			alert('ìˆ˜ì • ì„±ê³µ');
		},
		error: function() {
			
			alert('ì‹¤íŒ¨');
		}
	});
	const li = event.target.parentElement;
	li.style.color = '#d4d4d4';
	li.style.textDecoration = 'line-through';
	event.target.innerText = 'ðŸ¤';
}


function paintToRead(newToRead){
	const li = document.createElement('li');
	const span = document.createElement('span');
	span.innerText = newToRead;
	const button = document.createElement('span');
	button.innerText = 'ðŸ’›';
	li.appendChild(button);
	li.appendChild(span);
	toReadList.appendChild(li);
	//button.addEventListener('click', doneToRead);
}

function handleToReadSubmit(event){
	event.preventDefault();
	const newToRead = toReadInput.value;
	toReadInput.value = '';
	
	$.ajax({
		url: '/member/insertToReadList', //ìš”ì²­ê²½ë¡œ
		type: 'post',
		data: {'memId':memId, 'toReadTitle':newToRead}, //í•„ìš”í•œ ë°ì´í„° 'ë°ì´í„°ì´ë¦„':ê°’
		success: function(result) {
			alert('ì¶”ê°€ ì„±ê³µ');
		},
		error: function() {
			
			alert('ì‹¤íŒ¨');
		}
	});
	
	paintToRead(newToRead);
	
}
toReadForm.addEventListener('submit', handleToReadSubmit)